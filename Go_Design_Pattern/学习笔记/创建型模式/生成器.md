# 生成器模式

生成器模式是一种创建型设计模式，它允许你分步骤创建复杂对象。

与其他创建型模式不同，生成器模式不要求产品拥有通用接口，这使得用相同的创建过程生成不同的产品成为可能。

在这个示例中，我们有两个不同类型的房屋生成器：`iglooBuilder`（冰屋生成器）和`normalBuilder`（普通房屋生成器），它们分别用于建造不同类型的房屋，即`igloo`（冰屋）和`normalHouse`（普通房屋）。

每种房屋类型的建造步骤都是相同的，但是具体的建造细节和材料可能会有所不同。



下面是各个Go文件的详细解释：

1. **iBuilder.go - 生成器接口**

   ```go
   package main
   
   type IBuilder interface {
       setWindowType()
       setDoorType()
       setNumFloor()
       getHouse() House
   }
   
   func getBuilder(builderType string) IBuilder {
       if builderType == "normal" {
           return newNormalBuilder()
       }
       if builderType == "igloo" {
           return newIglooBuilder()
       }
       return nil
   }
   ```

   这个文件定义了一个名为`IBuilder`的接口，它是所有生成器的基类。

   `IBuilder`接口规定了所有实现该接口的类型必须具备三个方法：

   ​	`setWindowType`用于设置窗户类型，

   ​	`setDoorType`用于设置门类型，

   ​	`setNumFloor`用于设置楼层数，

   ​	以及`getHouse`用于获取最终建造的房屋对象。

    `getBuilder`函数根据传入的类型字符串返回相应的生成器实例。

2. **normalBuilder.go - 具体生成器 - 普通房屋生成器**

   ```go
   package main
   
   type NormalBuilder struct {
       windowType string
       doorType   string
       floor       int
   }
   
   func newNormalBuilder() *NormalBuilder {
       return &NormalBuilder{}
   }
   
   func (b *NormalBuilder) setWindowType() {
       b.windowType = "Wooden Window"
   }
   
   func (b *NormalBuilder) setDoorType() {
       b.doorType = "Wooden Door"
   }
   
   func (b *NormalBuilder) setNumFloor() {
       b.floor = 2
   }
   
   func (b *NormalBuilder) getHouse() House {
       return House{
           doorType:   b.doorType,
           windowType: b.windowType,
           floor:      b.floor,
       }
   }
   ```

   `normalBuilder.go`文件定义了一个`NormalBuilder`结构体，它代表普通房屋的生成器。

   该结构体实现了`IBuilder`接口，并定义了具体的建造步骤和最终的房屋对象。

3. **iglooBuilder.go - 具体生成器 - 冰屋生成器**

   ```go
   package main
   
   type IglooBuilder struct {
       windowType string
       doorType   string
       floor       int
   }
   
   func newIglooBuilder() *IglooBuilder {
       return &IglooBuilder{}
   }
   
   func (b *IglooBuilder) setWindowType() {
       b.windowType = "Snow Window"
   }
   
   func (b *IglooBuilder) setDoorType() {
       b.doorType = "Snow Door"
   }
   
   func (b *IglooBuilder) setNumFloor() {
       b.floor = 1
   }
   
   func (b *IglooBuilder) getHouse() House {
       return House{
           doorType:   b.doorType,
           windowType: b.windowType,
           floor:      b.floor,
       }
   }
   ```

   `iglooBuilder.go`文件定义了一个`IglooBuilder`结构体，它代表冰屋的生成器。

   与`NormalBuilder`类似，它也实现了`IBuilder`接口，并定义了冰屋特有的建造步骤和最终的房屋对象。

4. **house.go - 产品**

   ```go
   package main
   
   type House struct {
       windowType string
       doorType   string
       floor       int
   }
   ```

   `house.go`文件定义了一个`House`结构体，它代表建造完成的房屋。

   该结构体包含了房屋的窗户类型、门类型和楼层数。

5. **director.go - 主管**

   ```go
   package main
   
   type Director struct {
       builder IBuilder
   }
   
   func newDirector(b IBuilder) *Director {
       return &Director{
           builder: b,
       }
   }
   
   func (d *Director) setBuilder(b IBuilder) {
       d.builder = b
   }
   
   func (d *Director) buildHouse() House {
       d.builder.setDoorType()
       d.builder.setWindowType()
       d.builder.setNumFloor()
       return d.builder.getHouse()
   }
   ```

   `director.go`文件定义了一个`Director`结构体，它负责管理建造过程。

   `Director`结构体包含一个`IBuilder`类型的`builder`字段，以及设置生成器和建造房屋的方法。

6. **main.go - 客户端代码**

   ```go
   package main
   
   import "fmt"
   
   func main() {
       normalBuilder := getBuilder("normal")
       iglooBuilder := getBuilder("igloo")
       director := newDirector(normalBuilder)
       normalHouse := director.buildHouse()
       fmt.Printf("Normal House Door Type: %s\n", normalHouse.doorType)
       fmt.Printf("Normal House Window Type: %s\n", normalHouse.windowType)
       fmt.Printf("Normal House Num Floor: %d\n", normalHouse.floor)
       director.setBuilder(iglooBuilder)
       iglooHouse := director.buildHouse()
       fmt.Printf("\nIgloo House Door Type: %s\n", iglooHouse.doorType)
       fmt.Printf("Igloo House Window Type: %s\n", iglooHouse.windowType)
       fmt.Printf("Igloo House Num Floor: %d\n", iglooHouse.floor)
   }
   ```

   `main.go`文件是客户端代码，它创建了两个不同类型的生成器实例，并使用`Director`来建造两种不同类型的房屋。然后，它打印出每种房屋的具体属性。

通过这些文件的组合，我们可以看到生成器模式如何在Go语言中被实现和使用。这种模式允许我们通过一步一步的构建过程来创建复杂的对象，同时保持代码的清晰和易于维护。
